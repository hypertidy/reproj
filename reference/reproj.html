<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Reproject coordinates. — reproj.sc • reproj</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Reproject coordinates. — reproj.sc" />
<meta property="og:description" content="Reproject coordinates from a matrix or data frame by explicitly specifying the
'source' and 'target' projections." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reproj</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.2.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/hypertidy/reproj/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Reproject coordinates.</h1>
    <small class="dont-index">Source: <a href='https://github.com/hypertidy/reproj/blob/master/R/reproj-external-types.R'><code>R/reproj-external-types.R</code></a>, <a href='https://github.com/hypertidy/reproj/blob/master/R/reproj.R'><code>R/reproj.R</code></a></small>
    <div class="hidden name"><code>reproj.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Reproject coordinates from a matrix or data frame by explicitly specifying the
'source' and 'target' projections.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for sc</span>
<span class='fu'>reproj</span>(<span class='kw'>x</span>, target = <span class='kw'>NULL</span>, <span class='kw'>...</span>, source = <span class='kw'>NULL</span>)

<span class='co'># S3 method for mesh3d</span>
<span class='fu'>reproj</span>(<span class='kw'>x</span>, <span class='kw'>target</span>, <span class='kw'>...</span>, source = <span class='kw'>NULL</span>)

<span class='co'># S3 method for quadmesh</span>
<span class='fu'>reproj</span>(<span class='kw'>x</span>, <span class='kw'>target</span>, <span class='kw'>...</span>, source = <span class='kw'>NULL</span>)

<span class='co'># S3 method for triangmesh</span>
<span class='fu'>reproj</span>(<span class='kw'>x</span>, <span class='kw'>target</span>, <span class='kw'>...</span>, source = <span class='kw'>NULL</span>)

<span class='fu'>reproj</span>(<span class='kw'>x</span>, <span class='kw'>target</span>, <span class='kw'>...</span>, source = <span class='kw'>NULL</span>, four = <span class='fl'>FALSE</span>)

<span class='co'># S3 method for matrix</span>
<span class='fu'>reproj</span>(<span class='kw'>x</span>, <span class='kw'>target</span>, <span class='kw'>...</span>, source = <span class='kw'>NULL</span>, four = <span class='fl'>FALSE</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>reproj</span>(<span class='kw'>x</span>, <span class='kw'>target</span>, <span class='kw'>...</span>, source = <span class='kw'>NULL</span>, four = <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>coordinates</p></td>
    </tr>
    <tr>
      <th>target</th>
      <td><p>target specification (PROJ.4 string or epsg code)</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments passed to <code><a href='https://rdrr.io/pkg/proj4/man/transform.html'>proj4::ptransform()</a></code></p></td>
    </tr>
    <tr>
      <th>source</th>
      <td><p>source specification (PROJ.4 string or epsg code)</p></td>
    </tr>
    <tr>
      <th>four</th>
      <td><p>if <code>TRUE</code>, and PROJ version 6 is available return four columns xyzt (not just three xyz)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>matrix</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If the modern version of the library 'proj' is available, <code>reproj()</code> uses
the PROJ package, otherwise it falls pack to the proj4 package.</p>
<p>If using proj4, reproj drives the function <code><a href='https://rdrr.io/pkg/proj4/man/transform.html'>proj4::ptransform()</a></code> and sorts out
the requirements for it so that we can simply give coordinates in data frame
or matrix form, with a source projection and a target projection.</p>
<p>If using PROJ, reproj can pass in a wider variety of source and target
strings, not just "proj4string" and we are completely subject to the new
rules and behaviours of the PROJ library. We always assume "visualization
order", i.e. longitude then latitude, easting then northing (as X, Y).</p>
<p>The basic function <code>reproj()</code> takes input in generic form (matrix or data
frame) and returns a 3-column matrix (or 4-column if <code>four = TRUE</code>), by
transforming from map projection specified by the  <code>source</code> argument to that
specified by the <code>target</code> argument.  Only column order is respected, column
names are ignored.</p>
<p>This model of working also allows adding methods for specific data formats
that already carry a suitable <code>source</code> projection string. Currently we
support types from the silicate and quadmesh and rgl packages, and only the
<code>target</code> string need be specified.</p>
<p>This model has obvious flexibility, for packages to import the generic and
call it with the correct <code>source</code> (from the data format) and the <code>target</code>
from user, or process controlled mechanism.</p>
<p>The <code>source</code> argument must be named, and if it is not present a light check
is made that the source data could be "longitude/latitude" and transformation
to <code>target</code> is applied (this can be controlled by setting options).</p>
<p>The function<code>reproj()</code> always returns a 3-column matrix <em>unless</em> <code>four = TRUE</code>, and <code><a href='https://rdrr.io/pkg/PROJ/man/ok_proj6.html'>PROJ::ok_proj6()</a></code> is <code>TRUE</code> and then a 4-column matrix is returned.</p>
<p>Note that any integer input for <code>source</code> or <code>target</code> will be formatted to a
character string like "EPSG:&lt;integer_code&gt;" ('PROJ' package in use) or
"+init=epsg:&lt;integer_code&gt;" ('proj4' package in use), depending on the
outcome of <code><a href='https://rdrr.io/pkg/PROJ/man/ok_proj6.html'>PROJ::ok_proj6()</a></code>. This test function can be configured to
alternatively use 'proj4' for expert use.</p>
<p>Until recently the <code>proj4</code> package was the only one available for generic
data that will transform between arbitrary coordinate systems specified by
<em>source</em> and <em>target</em> coordinate systems and with control over 'xy' versus
'xyz' input and output.  This package adds some further features by wrapping
the need to convert longitude/latitude data to or from radians.</p>
<p>Other R packages for transforming coordinates are geared toward data
that's in a particular format. It's true that only GDAL provides the full
gamut of available geographic map projections, but this leaves a huge variety
of workflows and applications that don't need that level of functionality.</p>
    <h2 class="hasAnchor" id="dependencies"><a class="anchor" href="#dependencies"></a>Dependencies</h2>

    

<ul>
<li><p>The <a href='https://CRAN.r-project.org/package=PROJ'>PROJ</a> package is used
preferentially if is functional, using the underlying 'PROJ-lib' at version 6
or higher. * The <a href='https://CRAN.r-project.org/package=proj4'>proj4</a> package is
used if PROJ is not functional.
The proj4 package works perfectly well with the PROJ-lib at versions 4, 5, 6,
or 7 and if this is preferred reproj can be set to ignore the PROJ R package
(see
<a href='https://hypertidy.github.io/reproj/reference/reproj-package.html'>reproj-package</a>).</p></li>
</ul>

    <h2 class="hasAnchor" id="global-options"><a class="anchor" href="#global-options"></a>Global options</h2>

    

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Assuming longitude/latitude input</h3>


<p>The behaviour is controlled by user-settable options which on start up are
<code>reproj.assume.longlat = TRUE</code> and
<code>reproj.default.longlat = "+proj=longlat +datum=WGS84 +no_defs"</code>.</p>
<p>If the option <code>reproj.assume.longlat</code> is set to FALSE then the <code>source</code>
argument must be named explicitly, i.e. <code>reproj(xy, t_srs, source = s_srs)</code>,
this is to help catch mistakes being made. The <code>target</code> is the second
argument in <code>reproj</code> though it is the third argument in <code><a href='https://rdrr.io/pkg/proj4/man/transform.html'>proj4::ptransform</a></code>.
This function also converts to radians on input or output as required.</p>
<p>If the option <code>reproj.assume.longlat</code> is set to TRUE and the input data
appear to be sensible longitude/latitude values, then the value of
<code>reproj.default.longlat</code> is used as the assumed source projection.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Controlling use or PROJ or proj4</h3>


<p>See <a href='reproj-package.html'>reproj-package</a> for another option set <code>reproj.mock.noproj6</code> for package
testing for expert use.</p>

    <h2 class="hasAnchor" id="warning"><a class="anchor" href="#warning"></a>Warning</h2>

    


<p>There are a number of limitations to the PROJ library please use at your own
risk. The sf package provides a better supported facility to modern code and
especially for datum transformations.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>reproj</span>(<span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span>(<span class='fl'>147</span>, <span class='op'>-</span><span class='fl'>42</span>), target = <span class='st'>"+proj=laea +datum=WGS84"</span>,
                         source = <span class='st'>"+proj=longlat +datum=WGS84"</span>)
</div><div class='output co'>#&gt;           x_       y_  
#&gt; [1,] 5969744 -9803200 0</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael D. Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


