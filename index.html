<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coordinate System Transformations for Generic Map Data • reproj</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Coordinate System Transformations for Generic Map Data">
<meta property="og:description" content="Transform coordinates from a specified source to a specified 
 target map projection. This uses the PROJ library directly, by wrapping the 
 PROJ package which leverages libproj, otherwise the proj4 package. The reproj() 
 function is generic, methods may be added to remove the need for an explicit 
 source definition. If proj4 is in use reproj() handles the requirement for 
 conversion of angular units where necessary. This is for use primarily to 
 transform generic data formats and direct leverage of the underlying
 PROJ library. (There are transformations that arent possible with PROJ and
 that are provided by the GDAL library, a limitation which users of this 
 package should be aware of.) The PROJ' library is available at 
 &lt;https://proj.org/&gt;.  ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">reproj</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.2.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/hypertidy/reproj/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="reproj" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#reproj" class="anchor"></a>reproj</h1></div>
<p>The goal of reproj is to reproject data between coordinate systems.</p>
<p>The <code>proj4</code> package is the only one available for generic data that will transform between arbitrary coordinate systems specified by <em>source</em> and <em>target</em> coordinate systems, and the only one with control over ‘xy’ versus ‘xyz’ input and output. reproj adds some further features by wrapping the need to convert longitude/latitude data to or from radians.</p>
<p>Other R packages for transforming coordinates are monolithic and do not expose the underlying facility outside of their specific goals and contexts. The packages that do this are <code>rgdal</code>, <code>sf</code> and <code>lwgeom</code>. The all require GDAL by some means, and include many other irrelevant libraries and restrictions including specific data formats that are inefficient.</p>
<p>Possible alternatives are <code>mapproj</code> and <code>globe</code> but these are variously too specific or difficult to use. If you know of others please let me know!</p>
<div id="warning" class="section level2">
<h2 class="hasAnchor">
<a href="#warning" class="anchor"></a>Warning</h2>
<p>There are a number of limitations to the <a href="https://CRAN.r-project.org/package=proj4">proj4</a> package that is used, please use reproj at your own risk. The <a href="https://CRAN.r-project.org/package=sf">sf</a> package provides a better supported facility to modern code and for datum transformations. (We have not even checked if proj4 can do datum transforms). If a more generic interface to the PROJ library becomes available we will configure reproj to use it.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the dev version of reproj from <a href="https://github.com/hypertidy/reproj/">github</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw">remotes</span>::<span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"hypertidy/reproj"</span>)
</pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This example shows how to convert between coordinate systems:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/hypertidy/reproj">reproj</a></span>)
(<span class="kw">pt</span> <span class="op">&lt;-</span> (<span class="fu"><a href="reference/reproj.sc.html">reproj</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">147</span>, <span class="fl">148</span>), <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="fl">42</span>, <span class="op">-</span><span class="fl">45</span>)), target = <span class="st">"+proj=laea +datum=WGS84"</span>, source = <span class="fl">4326</span>)))
<span class="co">#&gt;           x_        y_ z_</span>
<span class="co">#&gt; [1,] 5969744  -9803200  0</span>
<span class="co">#&gt; [2,] 5362760 -10052226  0</span>

<span class="co">## to another coordinate system</span>
(<span class="kw">pt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/reproj.sc.html">reproj</a></span>(<span class="kw">pt</span>, target = <span class="st">"+proj=lcc +lat_1=-20 +lat_2=-10 +datum=WGS84"</span>, source = <span class="st">"+proj=laea +datum=WGS84"</span>))
<span class="co">#&gt;            x_       y_ z_</span>
<span class="co">#&gt; [1,] 12701201 -9158714  0</span>
<span class="co">#&gt; [2,] 12538357 -9514556  0</span>

<span class="co">## and back again</span>

<span class="fu"><a href="reference/reproj.sc.html">reproj</a></span>(<span class="kw">pt1</span>, target = <span class="st">"+proj=longlat +datum=WGS84"</span>, source = <span class="st">"+proj=lcc +lat_1=-20 +lat_2=-10 +datum=WGS84"</span>)
<span class="co">#&gt;       x_  y_ z_</span>
<span class="co">#&gt; [1,] 147 -42  0</span>
<span class="co">#&gt; [2,] 148 -45  0</span>
</pre></div>
<p>Note that the output is always in ‘xyz’ form, even if the z value is implied zero. The input may also be ‘xyz’ and it is the user’s job to ensure this is specified correctly. It’s not possible to automate every case, because among the three main cases:</p>
<ul>
<li>longitude latitude and elevation,</li>
<li>projected xy and elevation,</li>
<li>geocentric xyz with embedded elevation (an offset to the radius <code>+a/+b</code> in PROJ terms),</li>
</ul>
<p>it is not possible to easily capture the intended task. reproj sits at the simplest level of flexibility and control, and doesn’t impose any restrictions of converting between these cases.</p>
</div>
<div id="contributions" class="section level2">
<h2 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h2>
<p>Are you interested in reproj or even contributing? Great! Please use the <a href="https://github.com/hypertidy/reproj/issues">issues</a> tab for discussions.</p>
<p>This is a wishlist / todo.</p>
<ul>
<li>wrap modern PROJ in an R package with no other dependencies</li>
<li>isolate the sf/lwgeom code for PROJ.4 in its own package</li>
<li>allow choice of engine for <code>reproj.method</code> (this is already possible for your own classes)</li>
</ul>
<p>Please note that the ‘reproj’ project is released with a <a href="https://hypertidy.github.io/reproj/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=reproj">https://​cloud.r-project.org/​package=reproj</a>
</li>
<li>Browse source code at <br><a href="https://github.com/hypertidy/reproj/">https://​github.com/​hypertidy/​reproj/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/hypertidy/reproj/issues/">https://​github.com/​hypertidy/​reproj/​issues/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Michael D. Sumner <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2471-7511" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/hypertidy/reproj"><img src="https://travis-ci.org/hypertidy/reproj.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://github.com/hypertidy/reproj/actions"><img src="https://github.com/hypertidy/reproj/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://cran.r-project.org/package=reproj"><img src="https://www.r-pkg.org/badges/version/reproj" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=reproj"><img src="http://cranlogs.r-pkg.org/badges/reproj" alt="CRAN_Download_Badge"></a></li>
<li><a href="https://github.com/hypertidy/reproj/actions"><img src="https://github.com/hypertidy/reproj/workflows/test-coverage/badge.svg" alt="R build status"></a></li>
<li><a href="https://github.com/hypertidy/reproj/actions"><img src="https://github.com/hypertidy/reproj/workflows/pkgdown/badge.svg" alt="R build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Michael D. Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
